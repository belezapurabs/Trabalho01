CREATE DATABASE SALAO_BELEZA_PURA;

USE SALAO_BELEZA_PURA;

CREATE TABLE CONTATO (
    cod_contato integer PRIMARY KEY,
    Descrição_contato varchar(80)
);

INSERT INTO CONTATO(COD_CONTATO,DESCRIÇÃO_CONTATO)
VALUES(81,'MARIA@GMAIL.COM'),(82,'2222-2222'),(83,'FLAVIS@GMAIL.COM'),(84,'JOAO NESC'),(85,'(27) 99999-3223'),(86,'1010-1010'),(87,'ANDERSON@GMAIL.COM'),(88,'JESSICA GONSALVES'),(89,'ALLANIS@GMAIL.COM');

SELECT *FROM CONTATO;

CREATE TABLE TIPO_CONTATO (
    Codigo integer PRIMARY KEY,
    Descrição varchar(80)
);
INSERT INTO TIPO_CONTATO(CODIGO,DESCRIÇÃO)
VALUES(10,'EMAIL'),(20,'TELEFONE'),(30,'FACEBOOK'),(40,'CELULAR');

SELECT *FROM TIPO_CONTATO;

CREATE TABLE PESSOA (
    CPF integer,
    SEXO char(1),
    COD_PESSOA integer PRIMARY KEY,
    NOME varchar(150)
);
INSERT INTO PESSOA(CPF,SEXO,COD_PESSOA,NOME)
VALUES(1010,'F',71,'MARIA'),(2020,'F',72,'FLAVIS'),(3030,'M',73,'JEFF'),(4040,'M',74,'JOÃO'),(5050,'M',75,'ANDRE'),
(6060,'M',76,'WELLYTON'),(7070,'M',77,'ANDERSON'),(8080,'F',78,'JESSICA'),(9090,'F',79,'ALLANIS');

SELECT *FROM PESSOA;

CREATE TABLE TIPO_LOCAL (
    Cod_tipo_local INT PRIMARY KEY,
    Descrição varchar(80)
);

INSERT INTO TIPO_LOCAL(COD_TIPO_LOCAL,DESCRIÇÃO)
VALUES(101,'RUA'),(102,'AV');

SELECT *FROM TIPO_LOCAL;

CREATE TABLE BAIRRO (
    Nome_bairro varchar(80),
    Cod_bairro INT PRIMARY KEY,
    FK_MUNICIPIO_Cod_Municipio INT
);

INSERT INTO BAIRRO(NOME_BAIRRO,COD_BAIRRO,FK_MUNICIPIO_COD_MUNICIPIO)
VALUES('PRAIA MAR',21,31),('GAIVOTAS',22,31),('DIVINOPOLIS',23,31),('GOIABEIRAS',24,32),('VIANA',25,33);

SELECT *FROM BAIRRO;

CREATE TABLE LOCAL (
    CEP INT,
    Descrição varchar(80),
    Numero_Casa INT,
    FK_TIPO_LOCAL_Cod_tipo_local INT,
    FK_BAIRRO_Cod_bairro INT
);

INSERT INTO LOCAL(CEP,DESCRIÇÃO,NUMERO_CASA,FK_TIPO_LOCAL_COD_TIPO_LOCAL,FK_BAIRRO_COD_BAIRRO)
VALUES(11112,'NOVA_ERA',12,101,21),(22223,'NOVA_HORIZONTE',14,102,22),(33334,'GOVERNADOR_VALADARES',15,101,21),(44445,'CAPITÃO',102,102,22),(55556,'VV',19,101,25);

SELECT *FROM LOCAL;

CREATE TABLE MUNICIPIO (
    Nome_municipio varchar(80),
    Cod_Municipio INT PRIMARY KEY,
    FK_ESTADO_Cod_Estado INT
);

INSERT INTO MUNICIPIO  (NOME_MUNICIPIO,COD_MUNICIPIO,FK_ESTADO_COD_ESTADO)
VALUES('SERRA',31,41),('VITORIA',32,41),('VILA_VELHA',33,41),('ARACRUZ',34,41),('ALEGRE',35,41);

SELECT *FROM MUNICIPIO;

CREATE TABLE ESTADO (
    Cod_Estado INT PRIMARY KEY,
    Nome_Estado CHAR(2)
);

INSERT INTO ESTADO  (COD_ESTADO,NOME_ESTADO)
VALUES(41,'ES'),(42,'MG'),(43,'RS'),(44,'RJ'),(45,'SP');

SELECT *FROM ESTADO;

CREATE TABLE ITENS (
    Cod_Item integer PRIMARY KEY,
    Nome varchar(150),
    Descrição varchar(80),
    Preço integer
);

INSERT INTO ITENS  (COD_ITEM,NOME,DESCRIÇÃO,PREÇO)
VALUES(50,'SELAGEM','SELAGEM',25.00),(51,'CORTE','CORTE_MASCULINO',10.00),(52,'CORTE_F','CORTE_FEMINO',40.00),(53,'HIDRATAÇÃO','HIDRATAÇÃO_CAPILAR',25.00),(54,'SHAMPOO_ALFAPART','Nutri Seduction Pear',70.00),(55,'LOréal','Professionnel Absolut ',120.00),
(56,'MANICURE','UNHAS_DAS_MAOS',15.00),(57,'PEDICURE','UNHAS_DAO_PES',15.00),(58,'kit','kit_completo',200.00),(59,'kit','kit_cauterização',150.00),(60,'kit','kit_De_Esmalte',26.00);

SELECT *FROM ITENS;

CREATE TABLE FUNCIONARIO (
    Salario FLOAT,
    FK_Função_Função_PK INT,
    FK_PESSOA_COD_PESSOA integer
);

INSERT INTO FUNCIONARIO (SALARIO,FK_FUNÇÃO_FUNÇÃO_PK,FK_PESSOA_COD_PESSOA)
VALUES(937.00,51,76),(1100.00,52,76),(937.00,56,79),(937.00,57,78),(1000,51,77);

SELECT *FROM FUNCIONARIO;

CREATE TABLE Tipo_Status (
    Cod_Tipo_Status integer PRIMARY KEY,
    Descrição varchar(80)
);

INSERT INTO TIPO_STATUS (COD_TIPO_STATUS,DESCRIÇÃO)
VALUES(61,'FEITO'),(62,'CANCELADO'),(63,'ESPERANDO'),(64,'CONFIRMADO');

SELECT *FROM TIPO_STATUS;

CREATE TABLE AGENDA (
    Cod_Agenda INT PRIMARY KEY,
    Hora_Agenda time,
    Data_Agenda DATE,
    FK_PESSOA_COD_PESSOA integer,
    FK_Tipo_Status_Cod_Tipo_Status integer
);

INSERT INTO AGENDA (COD_AGENDA,HORA_AGENDA,DATA_AGENDA,FK_PESSOA_COD_PESSOA,FK_TIPO_STATUS_COD_TIPO_STATUS)
VALUES(91,'15:00','2017/06/02',71,63),(92,'16:00','2017/06/04',73,64),(93,'13:00','2017/06/02',74,63),(94,'08:00','2017/06/01',72,62),(95,'09:00','2017/06/05',75,64);

SELECT *FROM AGENDA;

CREATE TABLE SERVICO (
    TEMPO TIME,
    FK_ITENS_Cod_Item integer
);

INSERT INTO SERVICO (TEMPO,FK_ITENS_COD_ITEM)
VALUES('00:40',51),('01:00',52),('00:40',56),('00:40',57),('00:20',53);

SELECT *FROM SERVICO;

CREATE TABLE PRODUTO (
    VALIDADE DATE,
    FK_ITENS_Cod_Item integer
);

INSERT INTO PRODUTO (VALIDADE,FK_ITENS_COD_ITEM)
VALUES('2020/06/15',54),('2020/09/20',55),('2018/01/11',58),('2020/07/22',59),('2019/12/04',60);

SELECT *FROM PRODUTO;

CREATE TABLE Função (
    Função_PK INT NOT NULL PRIMARY KEY,
    Função varchar(80)
);

INSERT INTO FUNÇÃO (FUNÇÃO_PK,FUNÇÃO)
VALUES(50,'SELAGEM'),(51,'CORTE'),(52,'CORTE_F'),(56,'MANICURE'),(57,'PEDICURE');

SELECT *FROM FUNÇÃO;

CREATE TABLE POSSUI (
    FK_CONTATO_cod_contato integer,
    FK_TIPO_CONTATO_Codigo integer
);

INSERT INTO POSSUI (FK_CONTATO_COD_CONTATO,FK_TIPO_CONTATO_CODIGO)
VALUES(81,10),(82,20),(83,10),(84,30),(85,40),(86,20),(87,10),(88,30),(89,10);

SELECT *FROM TIPO_CONTATO;

CREATE TABLE POSSUI_LOCAL (
    FK_PESSOA_COD_PESSOA integer
);

INSERT INTO POSSUI_LOCAL (FK_PESSOA_COD_PESSOA)
VALUES(71),(72),(73),(74),(75),(76),(77),(78),(79);

SELECT *FROM POSSUI_LOCAL;

CREATE TABLE COMPRA (
    FK_PESSOA_COD_PESSOA integer,
    FK_ITENS_Cod_Item integer,
    Cod_Compra INT PRIMARY KEY,
    Desconto float
);

INSERT INTO COMPRA (FK_PESSOA_COD_PESSOA,FK_ITENS_Cod_ITEM,Cod_Compra,Desconto)
VALUES(71,53,201,0),(72,54,202,10),(73,56,203,5),(74,55,204,2),(75,55,205,1);

SELECT *FROM COMPRA;

CREATE TABLE CADASTRAR (
    FK_ITENS_Cod_Item integer
);

INSERT INTO CADASTRAR (FK_ITENS_Cod_Item)
VALUES(51),(52),(53),(54),(55),(56),(57),(58),(59),(60),(50);

SELECT *FROM CADASTRAR;

CREATE TABLE Possui_CONTATO (
    FK_PESSOA_COD_PESSOA integer,
    FK_CONTATO_cod_contato integer
);
INSERT INTO POSSUI_CONTATO (FK_PESSOA_COD_PESSOA,FK_CONTATO_cod_contato)
VALUES(71,81),(72,82),(73,83),(74,84),(75,85),(76,86),(77,87),(78,88),(79,89);

SELECT *FROM POSSUI_CONTATO;
 
ALTER TABLE BAIRRO ADD CONSTRAINT FK_BAIRRO_1
    FOREIGN KEY (FK_MUNICIPIO_Cod_Municipio)
    REFERENCES MUNICIPIO (Cod_Municipio);
 
ALTER TABLE LOCAL ADD CONSTRAINT FK_LOCAL_0
    FOREIGN KEY (FK_TIPO_LOCAL_Cod_tipo_local)
    REFERENCES TIPO_LOCAL (Cod_tipo_local);
 
ALTER TABLE LOCAL ADD CONSTRAINT FK_LOCAL_1
    FOREIGN KEY (FK_BAIRRO_Cod_bairro)
    REFERENCES BAIRRO (Cod_bairro);
 
ALTER TABLE MUNICIPIO ADD CONSTRAINT FK_MUNICIPIO_1
    FOREIGN KEY (FK_ESTADO_Cod_Estado)
    REFERENCES ESTADO (Cod_Estado);
 
ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_FUNCIONARIO_0
    FOREIGN KEY (FK_Função_Função_PK)
    REFERENCES Função (Função_PK);
 
ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_FUNCIONARIO_1
    FOREIGN KEY (FK_PESSOA_COD_PESSOA)
    REFERENCES PESSOA (COD_PESSOA);
 
ALTER TABLE AGENDA ADD CONSTRAINT FK_AGENDA_1
    FOREIGN KEY (FK_PESSOA_COD_PESSOA)
    REFERENCES PESSOA (COD_PESSOA);
 
ALTER TABLE AGENDA ADD CONSTRAINT FK_AGENDA_2
    FOREIGN KEY (FK_Tipo_Status_Cod_Tipo_Status)
    REFERENCES Tipo_Status (Cod_Tipo_Status);
 
ALTER TABLE SERVICO ADD CONSTRAINT FK_SERVICO_0
    FOREIGN KEY (FK_ITENS_Cod_Item)
    REFERENCES ITENS (Cod_Item);
 
ALTER TABLE PRODUTO ADD CONSTRAINT FK_PRODUTO_0
    FOREIGN KEY (FK_ITENS_Cod_Item)
    REFERENCES ITENS (Cod_Item);
 
ALTER TABLE  Possui_CONTATO ADD CONSTRAINT FK_POSSUI_0
    FOREIGN KEY (FK_CONTATO_cod_contato)
    REFERENCES CONTATO (cod_contato);
 
ALTER TABLE POSSUI ADD CONSTRAINT FK_POSSUI_1
    FOREIGN KEY (FK_TIPO_CONTATO_Codigo)
    REFERENCES TIPO_CONTATO (Codigo);

ALTER TABLE COMPRA ADD CONSTRAINT FK_COMPRA_1
    FOREIGN KEY (FK_PESSOA_COD_PESSOA)
    REFERENCES PESSOA (COD_PESSOA);
 
ALTER TABLE COMPRA ADD CONSTRAINT FK_COMPRA_2
    FOREIGN KEY (FK_ITENS_Cod_Item)
    REFERENCES ITENS (Cod_Item);
 
ALTER TABLE CADASTRAR ADD CONSTRAINT FK_CADASTRAR_0
    FOREIGN KEY (FK_ITENS_Cod_Item)
    REFERENCES ITENS (Cod_Item);
